<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Juego del Amor 游눘</title>

<style>

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family: Arial;
}

body{
  background:#000;
  overflow:hidden;
}

#game{
  width:100vw;
  height:100vh;
  position:relative;
  background: radial-gradient(#24003a,#000);
  overflow:hidden;
}

/* HUD */
#hud{
  position:absolute;
  top:10px;
  left:10px;
  color:white;
  font-size:20px;
  z-index:5;
}

/* Player */
#player{
  width:70px;
  position:absolute;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
}

/* Enemigos */
.enemy{
  width:60px;
  position:absolute;
}

/* Balas */
.bullet{
  width:6px;
  height:18px;
  background:pink;
  position:absolute;
  border-radius:5px;
}

/* Pantalla final */
#message{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.9);
  color:white;
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  font-size:26px;
  z-index:10;
  text-align:center;
  padding:20px;
}

#message button{
  margin-top:20px;
  padding:10px 20px;
  border:none;
  background:pink;
  font-size:18px;
  border-radius:10px;
  cursor:pointer;
}

</style>
</head>

<body>

<div id="game">

  <div id="hud">游 Muertes: <span id="score">0</span></div>

  <img src="yamileth.png" id="player">

  <div id="message"></div>

</div>

<audio id="deathSound" src="death.mp3"></audio>

<script>

const game = document.getElementById("game");
const player = document.getElementById("player");
const message = document.getElementById("message");
const scoreText = document.getElementById("score");
const deathSound = document.getElementById("deathSound");

let playerX = window.innerWidth/2 - 35;

let bullets = [];
let enemies = [];
let gameOver = false;
let deaths = 0;


// Mensajes random 游땴
const frases = [
  "NOOOOO 游땴游눖",
  "쯇OR QU칄 ME HICISTE ESTO? 游땴",
  "ME MUEROOOO 游땻游눘",
  "MI CORAZ칍N 游눖游눖游눖",
  "ERES MUY FUERTE AMOR 游땘游댠",
  "VOLVER칄 POR TI 游땫游눚",
  "TE SIGO AMANDO 游땢游"
];


// Posici칩n inicial
player.style.left = playerX+"px";


// Movimiento
document.addEventListener("keydown", e=>{

  if(gameOver) return;

  if(e.key==="ArrowLeft") playerX -= 40;
  if(e.key==="ArrowRight") playerX += 40;

  if(playerX<0) playerX=0;
  if(playerX>window.innerWidth-70) playerX=window.innerWidth-70;

  player.style.left = playerX+"px";

});


// Disparo autom치tico
setInterval(()=>{

  if(gameOver) return;

  let bullet = document.createElement("div");

  bullet.className = "bullet";

  bullet.style.left = playerX + 32 + "px";
  bullet.style.bottom = "90px";

  game.appendChild(bullet);

  bullets.push(bullet);

},350);


// Crear enemigos (m치s lento)
function createEnemy(){

  if(gameOver) return;

  let enemy = document.createElement("img");

  enemy.src = "diego.png";
  enemy.className = "enemy";

  enemy.style.left = Math.random()*(window.innerWidth-60)+"px";
  enemy.style.top = "0px";

  game.appendChild(enemy);

  enemies.push(enemy);
}

setInterval(createEnemy,1800);


// Colisi칩n
function hit(a,b){

  let ar = a.getBoundingClientRect();
  let br = b.getBoundingClientRect();

  return !(
    ar.top > br.bottom ||
    ar.bottom < br.top ||
    ar.right < br.left ||
    ar.left > br.right
  );
}


// Loop
function update(){

  if(gameOver) return;

  // Balas
  bullets.forEach((b,i)=>{

    let bottom = parseInt(b.style.bottom);

    bottom += 15;

    b.style.bottom = bottom+"px";

    if(bottom>window.innerHeight){

      b.remove();
      bullets.splice(i,1);
    }
  });


  // Enemigos
  enemies.forEach((e,i)=>{

    let top = parseInt(e.style.top);

    top += 1;

    e.style.top = top+"px";

    if(top>window.innerHeight-100){
      lose();
    }

    bullets.forEach((b,bi)=>{

      if(hit(e,b)){

        e.remove();
        b.remove();

        enemies.splice(i,1);
        bullets.splice(bi,1);
      }
    });
  });

  requestAnimationFrame(update);
}

update();


// Perder
function lose(){

  gameOver=true;
  deaths++;

  scoreText.textContent = deaths;

  // Sonido
  if(deathSound){
    deathSound.currentTime=0;
    deathSound.play();
  }

  // Mensaje random
  let frase = frases[Math.floor(Math.random()*frases.length)];

  message.innerHTML=`
    ${frase}<br><br>
    游 Muertes: ${deaths}<br>
    <button onclick="location.reload()">Reintentar</button>
  `;

  message.style.display="flex";
}

</script>

</body>
</html>
